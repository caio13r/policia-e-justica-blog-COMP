function getQueryParam(n){return new URL(window.location.href).searchParams.get(n);}function slugify(s){return(s||'').toString().toLowerCase().trim().replace(/\s+/g,'-').replace(/[^\w\-]+/g,'').replace(/\-\-+/g,'-');}document.addEventListener('DOMContentLoaded',async function(){const y=document.getElementById('year');if(y)y.textContent=new Date().getFullYear();const slug=getQueryParam('slug');try{const r=await fetch('content/home.json',{cache:'no-store'});const d=await r.json();const list=Array.isArray(d.noticias)?d.noticias:[];let item=list.find(n=>n.slug===slug)||list.find(n=>slugify(n.title)===slug)||list[0];if(item){document.title=(item.title||'Matéria')+' — Polícia e Justiça';document.getElementById('post-title').textContent=item.title||'';document.getElementById('post-desc').textContent=item.desc||'';document.getElementById('post-img').src=item.img||'';document.getElementById('post-body').innerHTML=window.marked.parse(item.body||'');}else{document.getElementById('post-title').textContent='Matéria não encontrada';}}catch(e){console.error(e);}});